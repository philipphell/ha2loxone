blueprint:
  name: Home Assistant Cover Position to Loxone
  description: Send entity states from Home Assistant to Loxone
  domain: automation
  input:
    target_miniserver:
      name: Miniserver Address/DNS Name
      selector:
        text:
    target_miniserver_user: 
      name: Miniserver User
      selector: 
        text: 
    target_miniserver_password: 
      name: Miniserver Password
      selector: 
        text: 
          type: password
    target_entities:
      name: Trigger entities
      description: List the entities that will be sent to the VI's on the Miniserver
      selector:
        entity:
          multiple: true
          filter:
          - domain:
            - cover
  # source_url: https://gist.github.com/gigatexel/fb6c10e7202ad4b994aaadd9e82963f1
alias: Update Loxone (Cover Position)
description: ''
trigger:
- platform: state
  entity_id: !input target_entities
condition: []
action:
- service: rest_command.update_loxone
  data:
    miniserver: !input target_miniserver
    user: !input target_miniserver_user
    password: !input target_miniserver_password
    parameter: '{{ trigger.entity_id  }}/{{ trigger.to_state.attributes.current_position  }}'
#    parameter: '{{ trigger.entity_id  }}.current_position/{{ trigger.to_state.attributes.current_position  }}'
mode: parallel